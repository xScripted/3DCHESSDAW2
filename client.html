<!DOCTYPE HTML>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <title>TÃ­tol document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.0/socket.io.js"></script>
    <script src="client.js"></script>
</head>
<style>
    table * {
        padding: 10px;
    }
</style>
<script>
    var socket = io();
    window.onload = () => {
        var inputs = document.querySelectorAll("input");
        inputs[0].addEventListener("click", () => socket.emit('crearSala', inputs[1].value));
        inputs[2].addEventListener("click", () => socket.emit('borrarSala'));
        socket.on('ok', (listaPartidas) => {
            let taulaHTML = "<tr><td>ID</td><td>Jugadores</td><td>Espectadores</td><td colspan='2'>Unir-se</td></tr>";
            for(let j of listaPartidas)taulaHTML += `<tr><tr><td>${j.name.slice(0,3)}</td><td>${j.players}/2</td><td>${j.spect}</td><td><input class="unirse" type="button" data='${j.name}' value="Unir-se"></td></tr>`;
            taula.innerHTML = taulaHTML;
            let partidasUnise = document.querySelectorAll(".unirse");
            for(let j of partidasUnise)j.addEventListener("click", () => socket.emit('joinSala', j.getAttribute("data")));
        });  
    } 
</script>
<body>
    <input type="button" name="Crear" value="Crear Sala">
    <input type="text" name="temps" value="10" placeholder="temps en minuts">
    <input type="button" name="Salir" value="Sortir">
    <table id="taula" border>
    </table>
</body>
</html>
